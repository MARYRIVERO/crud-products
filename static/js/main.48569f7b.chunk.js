(this["webpackJsonpcrud-products"]=this["webpackJsonpcrud-products"]||[]).push([[0],{29:function(e,t,a){e.exports=a(51)},34:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),o=(a(34),a(3)),u=a(9),s=a(2),i=a(14),m=a.n(i);a(38),a(42),a(52);m.a.initializeApp({apiKey:"AIzaSyC6eGf-YOXK0U1qs3S_IAgpcG-WuitCkMg",authDomain:"crud-products2020.firebaseapp.com",databaseURL:"https://crud-products2020.firebaseio.com",projectId:"crud-products2020",storageBucket:"crud-products2020.appspot.com",messagingSenderId:"656711100750",appId:"1:656711100750:web:f57b8b70aced4c3c79961f"});var d=m.a.firestore(),p=m.a.auth(),b=m.a.storage(),f=Object(s.f)((function(e){return r.a.createElement("div",{className:"d-flex flex-row-reverse navbar navbar-dark bg-dark "},r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex"},r.a.createElement(u.b,{className:"btn btn-outline-info mr-2",to:"/",exact:!0},"Inicio"),null!==e.firebaseUser?r.a.createElement(u.b,{className:"btn btn-outline-info mr-2",to:"/admin"},"Admin"):null,null!==e.firebaseUser?r.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){p.signOut().then((function(){e.history.push("/login")}))}},"Cerrar Sesi\xf3n"):r.a.createElement(u.b,{className:"btn btn-outline-info",to:"/login"},"Login"))))})),g=a(5),v=a.n(g),E=a(10),h=Object(s.f)((function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(""),u=Object(o.a)(l,2),s=u[0],i=u[1],m=r.a.useState(null),b=Object(o.a)(m,2),f=b[0],g=b[1],h=r.a.useState(!0),x=Object(o.a)(h,2),k=x[0],N=x[1],O=r.a.useCallback(Object(E.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.createUserWithEmailAndPassword(n,s);case 3:return a=t.sent,console.log(a.user),t.next=7,d.collection(a.user.uid).add({email:a.user.email,uid:a.user.uid});case 7:return t.next=9,d.collection("usuarios").doc(a.user.uid).set({email:a.user.email,uid:a.user.uid});case 9:c(""),i(""),g(null),e.history.push("/admin"),t.next=24;break;case 15:if(t.prev=15,t.t0=t.catch(0),g(t.t0.message),"auth/email-already-in-use"!==t.t0.code){t.next=21;break}return g("Usuario ya registrado..."),t.abrupt("return");case 21:if("auth/invalid-email"!==t.t0.code){t.next=24;break}return g("Email no v\xe1lido"),t.abrupt("return");case 24:case"end":return t.stop()}}),t,null,[[0,15]])}))),[n,s,e.history]),j=r.a.useCallback(Object(E.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.signInWithEmailAndPassword(n,s);case 3:a=t.sent,console.log(a.user),c(""),i(""),g(null),e.history.push("/admin"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),"auth/user-not-found"===t.t0.code&&g("Usuario o contrase\xf1a incorrecta"),"auth/wrong-password"===t.t0.code&&g("Usuario o contrase\xf1a incorrecta");case 15:case"end":return t.stop()}}),t,null,[[0,11]])}))),[n,s,e.history]);return r.a.createElement("div",{className:"mt-2"},r.a.createElement("h3",{className:"align-baseline text-center"},k?"Registro":"Login"),r.a.createElement("hr",null),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.trim()?s.trim()?s.length<6?g("6 o m\xe1s car\xe1cteres en pass"):(g(null),k?O():j()):g("Ingrese Contrase\xf1a"):g("Ingrese Email")}},f?r.a.createElement("div",{className:"alert alert-danger"},f):null,r.a.createElement("input",{type:"email",className:"form-control mb-2",placeholder:"Ingrese un email",onChange:function(e){return c(e.target.value)},value:n}),r.a.createElement("input",{type:"password",className:"form-control mb-2",placeholder:"Ingrese una contrase\xf1a",onChange:function(e){return i(e.target.value)},value:s}),r.a.createElement("button",{className:"btn btn-dark btn-lg btn-block",type:"submit"},k?"Registrar":"Acceder"),r.a.createElement("button",{className:"btn btn-info btn-sm btn-block",onClick:function(){return N(!k)},type:"button"},k?"\xbfYa tienes cuenta?":"\xbfNo tienes cuenta?")))))})),x=a(28),k=a(18),N=(a(49),function(e){var t=r.a.useState([]),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(""),u=Object(o.a)(l,2),s=u[0],i=u[1],m=r.a.useState(""),p=Object(o.a)(m,2),f=p[0],g=p[1],h=r.a.useState(""),N=Object(o.a)(h,2),O=N[0],j=N[1],y=r.a.useState(null),w=Object(o.a)(y,2),S=w[0],C=w[1],I=r.a.useState(""),U=Object(o.a)(I,2),P=U[0],A=U[1],D=r.a.useState(0),L=Object(o.a)(D,2),B=L[0],R=L[1],M=r.a.useState(!1),W=Object(o.a)(M,2),z=W[0],G=W[1],J=r.a.useState(null),K=Object(o.a)(J,2),T=K[0],Y=K[1],_=r.a.useState(""),q=Object(o.a)(_,2),X=q[0],F=q[1];r.a.useEffect((function(){(function(){var t=Object(E.a)(v.a.mark((function t(){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.collection(e.user.uid).get();case 3:a=t.sent,n=a.docs.map((function(e){return Object(k.a)({id:e.id},e.data())})),console.log(n),c(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}})()()}),[e.user.uid]);var H=function(){var t=Object(E.a)(v.a.mark((function t(a){var r,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s.trim()){t.next=5;break}return console.log("est\xe1 vacio"),Y("Por favor complete los campos"),t.abrupt("return");case 5:if(f.trim()){t.next=9;break}return console.log("est\xe1 vacio"),Y("Por favor complete los campos"),t.abrupt("return");case 9:if(O.trim()){t.next=13;break}return console.log("est\xe1 vacio"),Y("Por favor complete los campos"),t.abrupt("return");case 13:if(P.trim()){t.next=17;break}return console.log("est\xe1 vacio"),Y("Por favor complete los campos"),t.abrupt("return");case 17:return Y(""),t.prev=18,r={titulo:s,descripcion:f,precio:O,image:P},t.next=22,d.collection(e.user.uid).add(r);case 22:l=t.sent,c([].concat(Object(x.a)(n),[Object(k.a)(Object(k.a)({},r),{},{id:l.id})])),i(""),g(""),j(""),C(""),A(""),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(18),console.log(t.t0);case 34:console.log(s);case 35:case"end":return t.stop()}}),t,null,[[18,31]])})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=Object(E.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.collection(e.user.uid).doc(a).delete();case 3:r=n.filter((function(e){return e.id!==a})),c(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(E.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s.trim()){t.next=4;break}return console.log("vacio"),t.abrupt("return");case 4:return t.prev=4,t.next=7,d.collection(e.user.uid).doc(X).update({titulo:s,descripcion:f,precio:O,image:P});case 7:r=n.map((function(e){return e.id===X?{id:e.id,titulo:s,descripcion:f,precio:O,image:S}:e})),c(r),G(!1),i(""),g(""),j(""),C(""),A(""),F(""),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[4,18]])})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var e=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.target.files[0]&&C(t.target.files[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("image: ",S),r.a.createElement("div",null,r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-md-6 fondo linea-derecha"},r.a.createElement("h3",null,"Lista de Productos"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped "},r.a.createElement("tr",null,r.a.createElement("td",null,"Titulo"),r.a.createElement("td",null,"Descripci\xf3n"),r.a.createElement("td",null,"Precio"),r.a.createElement("td",null,"Imagen"),r.a.createElement("td",null,"Opciones")),n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.titulo),r.a.createElement("td",null,e.descripcion),r.a.createElement("td",null,e.precio),r.a.createElement("td",null,r.a.createElement("img",{className:"imagenes",src:e.image,alt:"firebase"})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger btn-sm float-right",onClick:function(){return Q(e.id)}},"Eliminar"),r.a.createElement("button",{className:"btn btn-warning btn-sm float-right mr-2",onClick:function(){return function(e){G(!0),i(e.titulo),g(e.descripcion),j(e.precio),C(e.image),A(e.url),F(e.id)}(e)}},"Editar")))}))))),r.a.createElement("div",{className:"col-md-6 fondo"},r.a.createElement("h3",null,z?"Editar Producto":"Agregar Producto"),r.a.createElement("form",{onSubmit:z?V:H},T?r.a.createElement("div",{className:"alert alert-danger"},T):null,r.a.createElement("input",{type:"text",placeholder:"Ingrese producto",className:"form-control mb-2",onChange:function(e){return i(e.target.value)},value:s}),r.a.createElement("input",{type:"text",placeholder:"Ingrese descripcion",className:"form-control mb-2",onChange:function(e){return g(e.target.value)},value:f}),r.a.createElement("input",{type:"text",placeholder:"Ingrese precio",className:"form-control mb-2",onChange:function(e){return j(e.target.value)},value:O}),r.a.createElement("div",null,r.a.createElement("progress",{value:B,max:"100"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:Z}),r.a.createElement("button",{onClick:function(){b.ref("images/".concat(S.name)).put(S).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);R(t)}),(function(e){console.log(e)}),(function(){b.ref("images").child(S.name).getDownloadURL().then((function(e){A(e)}))}))}},"Subir"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("img",{className:"imagenes",src:P||"http://via.placeholder.com/150",alt:"firebase"})),r.a.createElement("button",{className:z?"btn btn-warning btn-block mb-2":"btn btn-dark btn-block mb-2",type:"submit"},z?"Editar":"Agregar")))))}),O=Object(s.f)((function(e){var t=r.a.useState(null),a=Object(o.a)(t,2),n=a[0],c=a[1];return r.a.useEffect((function(){p.currentUser?(console.log("existe"),c(p.currentUser)):(console.log("no existe"),e.history.push("/login"))}),[e.history]),r.a.createElement("div",{className:"mt-5"},n&&r.a.createElement(N,{user:n}))})),j=(a(50),function(){return r.a.createElement("div",{className:""},r.a.createElement("h3",{className:"text-right mt-3"},"Bienvenid@"))}),y=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){p.onAuthStateChanged((function(e){console.log(e),n(e||null)}))}),[]),!1!==a?r.a.createElement(u.a,null,r.a.createElement("div",{className:"container-fluid p-2"},r.a.createElement(f,{firebaseUser:a}),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0},r.a.createElement(j,null)),r.a.createElement(s.a,{path:"/login"},r.a.createElement(h,null)),r.a.createElement(s.a,{path:"/admin"},r.a.createElement(O,null))))):r.a.createElement("p",null,"Cargando...")},w=r.a.createContext(),S=function(e){return r.a.createElement(w.Provider,null,e.children)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null,r.a.createElement(y,null))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.48569f7b.chunk.js.map