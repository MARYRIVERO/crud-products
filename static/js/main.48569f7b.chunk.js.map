{"version":3,"sources":["firebase.js","components/Navbar.jsx","components/Login.jsx","components/Firestore.jsx","components/Admin.jsx","components/Inicio.jsx","App.jsx","context/SesionProvider.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","storage","withRouter","props","className","to","exact","firebaseUser","onClick","signOut","then","history","push","React","useState","email","setEmail","pass","setPass","error","setError","esRegistro","setEsRegistro","registrar","useCallback","a","createUserWithEmailAndPassword","res","console","log","user","collection","uid","add","doc","set","message","code","login","signInWithEmailAndPassword","onSubmit","e","preventDefault","trim","length","type","placeholder","onChange","target","value","Firestore","listado","setListado","producto","setProducto","descripcion","setDescripcion","precio","setPrecio","image","setImage","url","setUrl","progress","setProgress","modoEdicion","setModoEdicion","errores","setErrores","id","setId","useEffect","get","data","arrayData","docs","map","obtenerDatos","agregar","nuevaTarea","titulo","eliminar","delete","arrayFiltrado","filter","item","editar","update","arrayEditado","handleChange","files","key","src","alt","activarEdicion","max","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","child","getDownloadURL","setUser","currentUser","Inicio","App","setFirebaseUser","onAuthStateChanged","path","SesionContext","createContext","SesionProvider","Provider","children","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.48569f7b.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth'\nimport 'firebase/storage'\n\n//Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyC6eGf-YOXK0U1qs3S_IAgpcG-WuitCkMg\",\n    authDomain: \"crud-products2020.firebaseapp.com\",\n    databaseURL: \"https://crud-products2020.firebaseio.com\",\n    projectId: \"crud-products2020\",\n    storageBucket: \"crud-products2020.appspot.com\",\n    messagingSenderId: \"656711100750\",\n    appId: \"1:656711100750:web:f57b8b70aced4c3c79961f\"\n  };\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n//Atajo\nconst db= firebase.firestore();\nconst auth= firebase.auth()\nconst storage = firebase.storage()\n\nexport {db, auth, storage}","import React from 'react'\nimport {Link, NavLink} from 'react-router-dom'\nimport { withRouter } from 'react-router-dom';\nimport {auth} from '../firebase'\n\nconst Navbar = (props) => {\n\n    const cerrarSesion = () => {\n        auth.signOut()\n            .then(() => {\n                props.history.push('/login')\n            })\n    }\n\n    return (\n        <div className='d-flex flex-row-reverse navbar navbar-dark bg-dark '>\n            {/* <Link to=\"/\" className=\"navbar-brand\">CRUD</Link> */}\n            <div>\n                <div className=\"d-flex\">\n                    <NavLink\n                        className=\"btn btn-outline-info mr-2\"\n                        to=\"/\"\n                        exact\n                    >\n                        Inicio\n                    </NavLink>\n                    {\n                        props.firebaseUser !== null ? (\n                            <NavLink\n                                className=\"btn btn-outline-info mr-2\"\n                                to=\"/admin\"\n                            >\n                                Admin\n                            </NavLink>\n                        ) : null\n                    }\n\n                    {\n                        props.firebaseUser !== null ? (\n                            <button\n                                className=\"btn btn-outline-info\"\n                                onClick={() => cerrarSesion()}\n                            >\n                                Cerrar Sesión\n                            </button>\n                        ) : (\n                                <NavLink\n                                    className=\"btn btn-outline-info\"\n                                    to=\"/login\"\n                                >\n                                    Login\n                            </NavLink>\n                            )\n                    }\n\n                </div>\n\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(Navbar)\n","import React from 'react'\nimport { auth, db } from '../firebase'\nimport { withRouter } from 'react-router-dom';\n\n\n\nconst Login = (props) => {\n\n    const [email, setEmail] = React.useState('')\n    const [pass, setPass] = React.useState('')\n    const [error, setError] = React.useState(null)\n    const [esRegistro, setEsRegistro] = React.useState(true)\n\n    const procesarDatos = e => {\n        e.preventDefault()\n        if (!email.trim()) {\n            // console.log('Ingrese Email')\n            setError('Ingrese Email')\n            return\n        }\n        if (!pass.trim()) {\n            // console.log('Ingrese Contraseña')\n            setError('Ingrese Contraseña')\n            return\n        }\n        // console.log('Pasando todas las validaciones')\n        if (pass.length < 6) {\n            // console.log('6 o más carácteres')\n            setError('6 o más carácteres en pass')\n            return\n        }\n        // console.log('correcto...')\n        setError(null)\n\n        if (esRegistro) {\n            registrar()\n        } else {\n            login()\n        }\n    }\n\n    const registrar = React.useCallback(async () => {\n        try {\n            const res = await auth.createUserWithEmailAndPassword(email, pass)\n            console.log(res.user)\n\n            await db.collection(res.user.uid).add({\n                email: res.user.email,\n                uid: res.user.uid\n            })\n\n            await db.collection('usuarios').doc(res.user.uid).set({\n                email: res.user.email,\n                uid: res.user.uid\n            })\n            setEmail('')\n            setPass('')\n            setError(null)\n            props.history.push('/admin')\n\n        } catch (error) {\n            // console.log(error)\n            setError(error.message)\n\n            if (error.code === 'auth/email-already-in-use') {\n                setError('Usuario ya registrado...')\n                return\n            }\n            if (error.code === 'auth/invalid-email') {\n                setError('Email no válido')\n                return\n            }\n        }\n    }, [email, pass, props.history])\n\n    const login = React.useCallback(async () => {\n        try {\n            const res = await auth.signInWithEmailAndPassword(email, pass)\n            console.log(res.user)\n            setEmail('')\n            setPass('')\n            setError(null)\n            props.history.push('/admin')\n\n        } catch (error) {\n            // console.log(error)\n\n            if (error.code === 'auth/user-not-found') {\n                setError('Usuario o contraseña incorrecta')\n            }\n            if (error.code === 'auth/wrong-password') {\n                setError('Usuario o contraseña incorrecta')\n            }\n        }\n    }, [email, pass, props.history])\n\n    return (\n        <div className=\"mt-2\">\n            <h3 className=\"align-baseline text-center\">\n                {\n                    esRegistro ? 'Registro' : 'Login'\n                }\n            </h3>\n            <hr />\n            <div className=\"row justify-content-center\">\n                <div className=\"col-12 col-sm-8 col-md-6 col-xl-4\">\n                    <form onSubmit= { procesarDatos }>\n                        {\n                            error ? (\n                                <div className=\"alert alert-danger\">\n                                    {error}\n                                </div>\n                            ) : null\n                        }\n\n                        <input\n                            type=\"email\"\n                            className=\"form-control mb-2\"\n                            placeholder=\"Ingrese un email\"\n                            onChange={e => setEmail(e.target.value)}\n                            value={email}\n                        />\n                        <input\n                            type=\"password\"\n                            className=\"form-control mb-2\"\n                            placeholder=\"Ingrese una contraseña\"\n                            onChange={e => setPass(e.target.value)}\n                            value={pass}\n                        />\n                        <button\n                            className=\"btn btn-dark btn-lg btn-block\"\n                            type='submit'>\n                            {\n                                esRegistro ? 'Registrar' : 'Acceder'\n                            }\n                        </button>\n                        <button\n                            className=\"btn btn-info btn-sm btn-block\"\n                            onClick={() => setEsRegistro(!esRegistro)}\n                            type='button'\n                        >\n                            {\n                                esRegistro ? '¿Ya tienes cuenta?' : '¿No tienes cuenta?'\n                            }\n                        </button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(Login)","import React from 'react'\nimport {db, storage} from '../firebase'\nimport '../styles/firestore.css'\n\nconst Firestore = (props) => {\n\n    const [listado, setListado] = React.useState([])\n    const [producto, setProducto] = React.useState('')\n    const [descripcion, setDescripcion] = React.useState('')\n    const [precio, setPrecio] = React.useState('')\n    const [image, setImage] = React.useState(null);\n    const [url, setUrl] = React.useState(\"\");\n    const [progress, setProgress] = React.useState(0);\n    const [modoEdicion, setModoEdicion] = React.useState(false)\n    const [errores, setErrores] = React.useState(null)\n    const [id, setId] = React.useState('')\n  \n  \n    React.useEffect(() => {\n  \n      const obtenerDatos = async () => {\n  \n        try {\n  \n          const data = await db.collection(props.user.uid).get()\n          const arrayData = data.docs.map(doc => ({ id: doc.id, ...doc.data() }))\n          console.log(arrayData)\n          setListado(arrayData)\n          \n        } catch (error) {\n          console.log(error)\n        }\n  \n      }\n  \n      obtenerDatos()\n  \n    }, [props.user.uid])\n\n  \n    const agregar = async (e) => {\n      e.preventDefault()\n  \n      if(!producto.trim()){\n        console.log('está vacio')\n        setErrores('Por favor complete los campos')\n        return\n      }\n      if(!descripcion.trim()){\n        console.log('está vacio')\n        setErrores('Por favor complete los campos')\n        return\n      }\n      if(!precio.trim()){\n        console.log('está vacio')\n        setErrores('Por favor complete los campos')\n        return\n      }\n      if(!url.trim()){\n        console.log('está vacio')\n        setErrores('Por favor complete los campos')\n        return\n      }\n      setErrores('')\n  \n      try {\n  \n        const nuevaTarea = {\n          titulo: producto,\n          descripcion: descripcion,\n          precio: precio,\n          image: url\n        }\n        const data = await db.collection(props.user.uid).add(nuevaTarea)\n  \n        setListado([\n          ...listado,\n          {...nuevaTarea, id: data.id}\n        ])\n  \n        setProducto('')\n        setDescripcion('')\n        setPrecio('')\n        setImage('')\n        setUrl('')\n        \n      } catch (error) {\n        console.log(error)\n      }\n  \n      console.log(producto)\n    }\n  \n    const eliminar = async (id) => {\n      try {\n        \n        await db.collection(props.user.uid).doc(id).delete()\n  \n        const arrayFiltrado = listado.filter(item => item.id !== id)\n        setListado(arrayFiltrado)\n  \n      } catch (error) {\n        console.log(error)\n      }\n    }\n  \n    const activarEdicion = (item) => {\n      setModoEdicion(true)\n      setProducto(item.titulo)\n      setDescripcion(item.descripcion)\n      setPrecio(item.precio)\n      setImage(item.image)\n      setUrl(item.url)\n      setId(item.id)\n    }\n  \n    const editar = async (e) => {\n      e.preventDefault()\n      if(!producto.trim()){\n        console.log('vacio')\n        return\n      }\n      try {\n        \n        await db.collection(props.user.uid).doc(id).update({\n          titulo: producto,\n          descripcion: descripcion,\n          precio: precio,\n          image:url\n        })\n        const arrayEditado = listado.map(item => (\n          item.id === id ? {id: item.id, titulo: producto, descripcion: descripcion,\n          precio: precio, image:image} : item\n        ))\n        setListado(arrayEditado)\n        setModoEdicion(false)\n        setProducto('')\n        setDescripcion('')\n        setPrecio('')\n        setImage('')\n        setUrl('')\n        setId('')\n      } catch (error) {\n        console.log(error)\n      }\n    }\n\n\n\n\n  const handleChange = async(e) => {\n    e.preventDefault()\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      snapshot => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      error => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then(url => {\n            setUrl(url);\n          });\n      }\n    );\n  };\n\n  console.log(\"image: \", image);\n\n\n\n\n    return (\n        <div>\n            <div className=\"row \">\n                <div className=\"col-md-6 fondo linea-derecha\">\n                    <h3>Lista de Productos</h3>\n                    <div className= 'table-responsive'>\n                        <table className= 'table table-striped '>\n                            <tr>\n                                <td>Titulo</td>\n                                <td>Descripción</td>\n                                <td>Precio</td>\n                                <td>Imagen</td>\n                                <td>Opciones</td>\n                            </tr>\n                            {\n                              listado.map(item => (\n                                <tr  key={item.id}>\n                                    \n                                <td>{item.titulo}</td>\n                                <td>{item.descripcion}</td>\n                                <td>{item.precio}</td>\n                                <td>\n                                  <img className= 'imagenes' src={item.image} alt=\"firebase\" />\n                                </td>\n                                <td>\n                                <button \n                                    className=\"btn btn-danger btn-sm float-right\"\n                                    onClick={() => eliminar(item.id)}\n                                >\n                                    Eliminar\n                                </button>\n                                <button \n                                    className=\"btn btn-warning btn-sm float-right mr-2\"\n                                    onClick={() => activarEdicion(item)}\n                                >\n                                    Editar\n                                </button>\n                                </td>\n                                </tr>\n                            ))\n                            }\n                        </table>\n                    </div>\n                </div>\n                <div className=\"col-md-6 fondo\">\n                    <h3>\n                        {\n                        modoEdicion ? 'Editar Producto' : 'Agregar Producto'\n                        }\n                    </h3>\n                    <form onSubmit= \n                        {\n                          modoEdicion ? editar : agregar\n                        }\n                        >\n                        {\n                            errores ? (\n                                <div className=\"alert alert-danger\">\n                                    {errores}\n                                </div>\n                            ) : null\n                        }\n                        <input \n                        type=\"text\"\n                        placeholder=\"Ingrese producto\"\n                        className=\"form-control mb-2\"\n                        onChange={e => setProducto(e.target.value)}\n                        value={producto}\n                        />\n                        <input \n                        type=\"text\"\n                        placeholder=\"Ingrese descripcion\"\n                        className=\"form-control mb-2\"\n                        onChange={e => setDescripcion(e.target.value)}\n                        value={descripcion}\n                        />\n                        <input \n                        type=\"text\"\n                        placeholder=\"Ingrese precio\"\n                        className=\"form-control mb-2\"\n                        onChange={e => setPrecio(e.target.value)}\n                        value={precio}\n                        />\n                        {/* <div className= 'form-group'>\n                          <label>Agregar Imagen</label>\n                          <input \n                            type=\"file\"\n                            placeholder=\"Ingrese imagen\"\n                            className=\"form-control\"\n                            name='foto'\n                            id='foto'\n                          />\n                        </div> */}\n                      <div>\n                          <progress value={progress} max=\"100\" />\n                          <br />\n                          <br />\n                          <input type=\"file\" onChange={handleChange} />\n                          <button onClick={handleUpload}>Subir</button>\n                          <br />\n                          <br />\n                          <img className= 'imagenes' src={url || \"http://via.placeholder.com/150\"} \n                          alt=\"firebase\" />\n                      </div>\n\n                        <button \n                        className=\n                        {\n                            modoEdicion ? 'btn btn-warning btn-block mb-2' : 'btn btn-dark btn-block mb-2'\n                        }\n                        type=\"submit\"\n                        >\n                        {\n                            modoEdicion ? 'Editar' : 'Agregar'\n                        }\n                        </button>\n                    </form>\n                </div>\n            </div> \n        </div>\n    )\n}\n\nexport default Firestore\n","import React from 'react'\nimport { auth } from '../firebase'\nimport { withRouter } from 'react-router-dom';\nimport Firestore from './Firestore';\n\n\nconst Admin = (props) => {\n\n    const [user, setUser] = React.useState(null)\n\n    //currentUser nos trae la información del usuario\n    \n    React.useEffect(() => {\n        if(auth.currentUser){\n            console.log('existe')\n            setUser(auth.currentUser)\n        }else{\n            console.log('no existe')\n            props.history.push('/login')\n        }\n    }, [props.history])\n\n    return (\n        <div className= 'mt-5'>\n            {\n                user && (\n                    \n                    <Firestore user= {user}/>\n                    \n                )\n            }\n        </div>\n    )\n}\n\nexport default withRouter(Admin)\n","import React from 'react'\nimport '../styles/inicio.css'\n\n\nconst Inicio = () => {\n    return (\n        <div className= ''>\n            <h3 className='text-right mt-3'>Bienvenid@</h3>\n        </div>\n    )\n}\n\nexport default Inicio\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport Navbar from './components/Navbar';\nimport Login from './components/Login';\nimport Admin from './components/Admin';\nimport { auth } from './firebase'\nimport Inicio from './components/Inicio';\n\n\n\nconst App = () => {\n\n    const [firebaseUser, setFirebaseUser] = React.useState(false)\n\n    //onAuthStateChanged: va evaluando si existe el usuario,\n    // por lo tanto si se cierra sesión se vuelve a ejecutar onAuthStateChanged()\n\n    React.useEffect(() => {\n        auth.onAuthStateChanged(user => {\n            console.log(user)\n            if (user) {\n                setFirebaseUser(user)\n            } else {\n                setFirebaseUser(null)\n            }\n        })\n    }, [])\n\n    return firebaseUser !== false ? (\n\n        <Router>\n            <div className=\"container-fluid p-2\">\n                <Navbar firebaseUser={firebaseUser} />\n                <Switch>\n                    <Route path=\"/\" exact>\n                        <Inicio />\n                    </Route>\n                    <Route path=\"/login\">\n                        <Login />\n                    </Route>\n                    <Route path=\"/admin\">\n                        <Admin />\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n\n    ) : (\n            <p>Cargando...</p>\n        )\n}\n\nexport default App","import React from 'react'\n\nconst SesionContext = React.createContext()\n\nconst SesionProvider = (props) => {\n    return (\n        <SesionContext.Provider>\n            {props.children}\n        </SesionContext.Provider>\n    )\n}\n\nexport default SesionProvider\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\nimport SesionProvider from './context/SesionProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <SesionProvider>\n      <App />\n    </SesionProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}